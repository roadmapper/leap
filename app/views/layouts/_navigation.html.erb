<%= stylesheet_link_tag "dashboard_style" %>
<%# navigation styled for Bootstrap 3.0 %>
<% if user_signed_in? %>
<nav class="navbar navbar-inverse" role="navigation">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
		</div>

		<div class = "collapse navbar-collapse" id= "navbar-collapse-1">
			<ul class = "nav navbar-nav">
				<li><%= link_to 'LEAP', root_path, class: 'navbar-brand' %></li>
				<li class="dropdown">
          			<a href="#" class="dropdown-toggle" data-toggle="dropdown">Properties <b class="caret"></b></a>
      				<ul class="dropdown-menu">
            			<li><%= link_to 'All Properties', properties_path %></li>
						<li><%= link_to 'Add Property', new_property_path %></li>
            			<li class="divider"></li>
						<li><%= link_to 'Filter', filtering_path %></li>
          			</ul>
        		</li>
				
				<li><%= link_to 'Recordings', recordings_path %></li>
				<li><%= link_to 'Analyze', analysis_path %></li>
				<li><%= link_to 'Requests', requests_path %></li>
				<li><%= link_to 'Upload', uploads_path %></li>
				<li><%= link_to 'Measures', installed_measure_types_path %></li>
				<li><%= link_to 'New User', newusers_path, class: 'navbar-brand' %></li>
				<li><%= link_to 'Log out', destroy_user_session_path, :method => :delete %></li>
			</ul>

			<form class="navbar-form navbar-left" action="/dashboard/property_report" method="get"> 
				<%= label_tag(:owner,"", class: "lead") %>
				<div id ="bloodhound">
				<%= text_field_tag :owner, params[:owner], class: "typeahead form-control", size: 40, placeholder: "Search Properties" %>
				
				<button type="submit" class="btn btn-primary" style="height: 0px; width: 0px; border: none; padding: 0px;" hidefocus="true">Search</button> 
				</div>
			</form>
			
		</div>  
	</div>
</nav>

<script> 
var variables = new Bloodhound({
	datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
	queryTokenizer: Bloodhound.tokenizers.whitespace,
	limit: 8,
//	local: $.map(variables, function(variable) { return { value: variable }; })
 prefetch: {
	// url points to a json file that contains an array of country names, see
	// https://github.com/twitter/typeahead.js/blob/gh-pages/data/countries.json
	url: 'properties.json',
	// the json file contains an array of strings, but the Bloodhound
	// suggestion engine expects JavaScript objects so this converts all of
	// those strings
	filter: function(list) {
		return $.map(list, function(variable) { return { value: variable }; });
		}
	}
});

variables.initialize();

$('#bloodhound .typeahead').typeahead({
	hint: true,
	highlight: true,
	minLength: 1
	},
	{
	name: 'variables',
	displayKey: 'value',
	source: variables.ttAdapter()
});
</script>  
<% end %>
